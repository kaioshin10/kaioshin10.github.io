<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Thư viện riêng tư</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; margin:0; background:#f3f4f6; color:#111;}
    .wrap { max-width:1000px; margin:40px auto; padding:20px; background:#fff; border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,.06);}
    h1 { margin-top:0; text-align:center; }
    .login { display:flex; gap:8px; justify-content:center; margin:18px 0; }
    input[type="password"] { padding:10px 12px; font-size:16px; border:1px solid #ddd; border-radius:6px; width:260px;}
    button { padding:10px 14px; font-size:16px; border-radius:6px; border:0; background:#2563eb; color:white; cursor:pointer;}
    .note { text-align:center; color:#666; font-size:14px; margin-top:6px;}
    .gallery { display:grid; grid-template-columns: repeat(auto-fill,minmax(180px,1fr)); gap:12px; margin-top:18px; }
    .thumb { position:relative; overflow:hidden; border-radius:8px; background:#eee; }
    .thumb img { display:block; width:100%; height:160px; object-fit:cover; transition: transform .3s; }
    .thumb:hover img { transform:scale(1.04); }
    /* Lightbox */
    .lightbox { position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.8); z-index:9999; }
    .lightbox img { max-width:95%; max-height:90%; border-radius:8px; box-shadow:0 8px 30px rgba(0,0,0,.6); }
    .close { position:absolute; top:20px; right:26px; color:#fff; font-size:28px; cursor:pointer; }
    /* Small screens */
    @media (max-width:420px){ input[type="password"]{width:140px} .thumb img{height:120px} }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Thư viện riêng tư</h1>
    <p style="text-align:center">Nhập mật khẩu để xem ảnh.</p>

    <div style="text-align:center">
      <div class="login">
        <input id="pw" type="password" placeholder="Mật khẩu">
        <button id="btn">Mở</button>
      </div>
      <div class="note" id="note"></div>
    </div>

    <!-- Thư viện (ẩn mặc định) -->
    <div id="gallery" style="display:none">
      <div class="gallery" id="grid">
        <!-- Các ảnh sẽ là <div class="thumb"><img src="..."></div> -->
      </div>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" aria-hidden="true">
    <div class="close" id="close">&times;</div>
    <img id="lbimg" src="" alt="photo">
  </div>

  <script>
  // ====== CÁCH HOẠT ĐỘNG ======
  // 1) Enter mật khẩu → SHA-256 hash → so sánh với STORED_HASH
  // 2) Nếu đúng -> hiển thị gallery, nếu sai -> thông báo

  // ==== THAY ĐỔI: ở đây là hash SHA-256 của mật khẩu mẫu "love1234"
  // Nếu muốn đổi mật khẩu, tạo hash mới (hướng dẫn bên dưới) và thay vào STORED_HASH.
  const STORED_HASH = "7c2c4e4e5e3a03cb6f5a1261cbd83d43779b7200e7e376ed29e1ec2655a4f3e4";

  // ==== Danh sách ảnh: sửa URL trong mảng này thành link ảnh bạn muốn (imgur, direct link, hoặc raw Google Drive link)
  const IMAGES = [
    // ví dụ mặc định — thay bằng URL của bạn
    "https://picsum.photos/id/1015/1200/800",
    "https://picsum.photos/id/1016/1200/800",
    "https://picsum.photos/id/1025/1200/800",
    "https://picsum.photos/id/1005/1200/800"
  ];

  // Hàm băm SHA-256 bằng Web Crypto API, trả về hex string
  async function sha256hex(msg) {
    const enc = new TextEncoder();
    const data = enc.encode(msg);
    const hash = await crypto.subtle.digest("SHA-256", data);
    const bytes = new Uint8Array(hash);
    return Array.from(bytes).map(b => b.toString(16).padStart(2,"0")).join("");
  }

  // Hiển thị gallery
  function showGallery() {
    const grid = document.getElementById("grid");
    grid.innerHTML = "";
    IMAGES.forEach(url => {
      const d = document.createElement("div");
      d.className = "thumb";
      const img = document.createElement("img");
      img.loading = "lazy";
      img.src = url;
      img.alt = "photo";
      img.style.cursor = "zoom-in";
      img.addEventListener("click", ()=> openLightbox(url));
      d.appendChild(img);
      grid.appendChild(d);
    });
    document.getElementById("gallery").style.display = "block";
    document.getElementById("note").textContent = "Đã mở thư viện.";
  }

  // Lightbox
  function openLightbox(url) {
    const lb = document.getElementById("lightbox");
    const lbimg = document.getElementById("lbimg");
    lbimg.src = url;
    lb.style.display = "flex";
    lb.setAttribute("aria-hidden","false");
  }
  function closeLightbox() {
    const lb = document.getElementById("lightbox");
    lb.style.display = "none";
    lb.setAttribute("aria-hidden","true");
    document.getElementById("lbimg").src = "";
  }
  document.getElementById("close").addEventListener("click", closeLightbox);
  document.getElementById("lightbox").addEventListener("click", (e)=>{
    if(e.target.id === "lightbox") closeLightbox();
  });

  // Sự kiện nút
  document.getElementById("btn").addEventListener("click", async ()=>{
    const pw = document.getElementById("pw").value || "";
    document.getElementById("note").textContent = "Đang kiểm tra...";
    const h = await sha256hex(pw);
    if(h === STORED_HASH) {
      document.getElementById("note").textContent = "";
      showGallery();
      // Xóa ô mật khẩu để tránh lưu trong DOM
      document.getElementById("pw").value = "";
      // ẩn phần login nếu muốn
      document.querySelector(".login").style.display = "none";
    } else {
      document.getElementById("note").textContent = "Mật khẩu không đúng. Thử lại.";
      setTimeout(()=> document.getElementById("note").textContent = "", 3500);
    }
  });

  // Bấm enter trong input
  document.getElementById("pw").addEventListener("keydown", (e)=> { if(e.key==="Enter") document.getElementById("btn").click(); });

  </script>
</body>
</html>
